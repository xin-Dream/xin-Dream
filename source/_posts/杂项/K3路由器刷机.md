---
layout: post
title: K3路由器刷机
date: 2021-12-30 17:18:15
author: ZGX
tags:
  - 路由器
categories:
  - 杂项
top: 
typora-root-url: ../..
---

# 前言

> 本文用的设备是K3 A2，所以刷机流程也都是针对K3 A2的；
>
> 主要内容也是针对梅林固件，原厂固件版本是V21.6.12.66，其他只是参考。
>
> K3各个版本的教程请参考：[斐讯刷机教程](https://www.bilibili.com/video/BV15J411C7CF?p=2)

# 1 斐讯路由器K3

## 1.1 参数对比

|                | K3                              | K3C                                    |
| -------------- | ------------------------------- | -------------------------------------- |
| 处理器         | BCM4709 Cortex A9 双核处理器    | Intel                                  |
| DRAM内存与闪存 | 512M+128M                       | 256M+128M                              |
| 无线速率       | 3167Mbps                        | 1900Mbps(2.4GHz:600Mbps,5GHz:1300Mbps) |
| 天线数量       | 8根                             | 6,全向PCB阵列天线                      |
| 其他性能       | 3.5英寸TFT LCD屏<br/>PA+LNA模组 |                                        |

# 1.2 K3A1、A2、D1区别

1. A1为mxic闪存，可以自由刷机，但A2和D1都是三星闪存，**使用梅林固件时需要搭配U盘才能使用软件中心**，所以A2意义不大，反而麻烦
2. D1比A1、A2性能高，功耗大
3. D1可以挖矿

# 2 固件简介

1. 官改是指再原厂系统中有些改动的固件，这个一般比较简单，但是A2的操作不一样
2. 梅林固件，是使用华硕官方的闭源驱动，相比于普通的路由器能通过安装软件实现一些特殊功能

# 3 原厂刷官改

### [参考教程](https://www.bilibili.com/video/BV15J411C7CF?p=2)

### 方式一：指定固件

1. 查看固件版本

   ![image-20211230195625527](/images/K3路由器刷机/image-20211230195625527.png)

   前一列的固件版本和后一列所使用的方式不一样，我的属于旧版固件

2. 备份

   1. 文件下载

      将以下内容下载并保存至同一文件夹。

      cn.dat、待刷固件、tftpd、putty（也可以是其他软件，有ssh和Telnet功能即可）

   2. 进入管理页面（192.168.2.1）

   3. 功能设置->恢复文件（浏览）->选择cn.dat->恢复备份

   4. 等待重启后进入管理页面，登陆密码为tbvv.net

   5. 功能设置->存储管理-> 修改用户名为admin并保存

   6. 上传与刷入固件

      1. 设置计算机固定IP，在控制面板->网络管理->更改适配器选项->以太网 （右键选择属性）-> IPV4（选择属性）-> 设置一个固定的IP地址，如192.168.2.116

      2. 打开tftp软件，在server interfaces的下拉菜单选择上一步设置的固定IP地址

      3. 打开putty，主机名称设置192.168.2.1，选择Telnet选项后打开

      4. 执行命令

         ```bash
         cd /tmp; tftp -g -r k3_v21d.bin 192.168.2.116
         
         # k3_v21d.bin是待刷固件,若要刷固件不同需要更改为固件名称
         # 192.168.2.116为设置过的固定IP
         ```

         执行后可以看到tftp已经在上传固件了，等上传完成后再开始下一步

      5. 执行命令

         ```bash
         cat k3_v21d.bin>/dev/mtdblock6 && reboot
         ```

         这一步执行完成后，等待路由器重启完成

      6. 进入管理页面，在功能设置->系统状态查看当前版本

### 方式二：命令安装

1. 备份同上

2. 修改用户名同上

3. 使用putty通过Telnet连接路由器同上

4. 执行命令

   ```bash
   curl -Lksf tbvv.net/k3/one|sh
   ```

   等待命令执行完毕，路由器重启后进入管理页面的系统状态查看版本

# 4 原厂刷梅林

### 4.1刷机流程

### [参考教程](https://www.bilibili.com/video/BV15J411C7CF?p=3)

1. 按照上一节 原厂刷官改的方式先将路由器刷至官改，然后再执行下面步骤。我使用的是比较简单的方式二。

2. 使用putty通过ssh方式连接路由器，用户名admin，密码：tbvv.net

3. 执行命令

   ```bash
   tb
   ```

4. 选择出现的菜单项中的刷机&还原选项，输入5后回车

5. 选择第二项，梅林固件，输入2后回车

6. 选择梅林固件版本，这里选择第四项，这是一个比较稳定的版本，然后就开始刷机

7. 上一步重启后，再次进入管理界面，这时进入的就是梅林固件的管理界面：192.168.50.1

8. 进入后就是和普通路由器一样的设置，至此梅林固件刷机完成，但A2版本还有些残留问题，后面慢慢解决。

### 4.2 安装软件中心

### 4.3 梅林固件使用说明

#### 4.3.1 局域网共享移动硬盘

#### 4.3.2 SSR
