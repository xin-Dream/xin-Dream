<!DOCTYPE html>
<html>

    <head>
        <title>
            DreamCube
                ZGX
        </title>
        <meta charset="utf-8">

        <!-- 引入配置文件 -->
        
<link rel="stylesheet" href="/CSS/main.css">

        <!-- 字体图片库 -->
        
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

        <!-- 代码高亮库 -->
        
<link rel="stylesheet" href="/lib/highlight/styles/atom-one-light.css">


    <meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Dream" type="application/atom+xml">
</head>

    <header>
        <span class="name">DreamCube </span>
        <div class="options">
            <a href="Home.html">首页</a>
            <a href="paging/control.html">..</a>
            <a href="paging/code.html">..</a>
            <a href="paging/debug.html">..</a>
            <a href="paging/explanation.html">..</a>
        </div>          
    </header>

    <body>


        <div class="home_container">

            <div id="home_content">
                <div id="home_con_top">
                    <h1>Dream</h1>
                    <h1>怕什么真理无穷，进一寸有一寸的欢喜</h1>
                </div>
                <div id="home_introduction">
                    <div>
    <span id="post-author">作者: ZGX</span>
    <span id="post-date">2021-08-14 20:49:04</span>
</div>

<div id="article">
    <blockquote>
<p>环境说明：solidworks2020、Ubuntu18.04、ROS-melodic</p>
</blockquote>
<h1 id="补充说明："><a href="#补充说明：" class="headerlink" title="补充说明："></a>补充说明：</h1><p>操作前请先看新更新的文章，注意开头的细节。</p>
<a href="/2021/11/20/ROS/%E6%8E%A7%E5%88%B6sw2urdf%E5%AF%BC%E5%87%BA%E6%A8%A1%E5%9E%8B%E5%9C%A8Rviz%E5%92%8CGazebo%E4%B8%AD%E8%BF%90%E5%8A%A8/" title="控制sw2urdf导出模型在Rviz和Gazebo中运动">控制sw2urdf导出模型在Rviz和Gazebo中运动</a>

<h1 id="一、-建模"><a href="#一、-建模" class="headerlink" title="一、 建模"></a>一、 建模</h1><p>建模时需注意以下几点</p>
<ol>
<li>机器人要有一个base_link，为其设置一个坐标原点。我的作图习惯是将base_link在装配时就定义到坐标原点，这样可以直接选用坐标原点设置为base_link的坐标原点。</li>
<li>为需要旋转的部分设置一个旋转轴，例如下图中机器人的四个轮子和前面的挡板应该是要转动的，所以在其各自旋转轴中设置旋转轴。<br>
<br>
![01](/images/Solidworks模型导出urdf/01.png)
<br>
<br>

</li>
</ol>
<h1 id="二、-插件安装"><a href="#二、-插件安装" class="headerlink" title="二、 插件安装"></a>二、 插件安装</h1><p><a target="_blank" rel="noopener" href="https://github.com/ros/solidworks_urdf_exporter/releases">solidworks_urdf_exporter</a><br>下载其中exe文件安装即可</p>
<h1 id="三、-solidwoks中导出urdf"><a href="#三、-solidwoks中导出urdf" class="headerlink" title="三、 solidwoks中导出urdf"></a>三、 solidwoks中导出urdf</h1><ol>
<li>在<strong>工具-&gt;Tools-&gt;Export as URDF</strong>中打开刚才安装的sw2urdf工具。或者直接在右上角搜索框输入urdf，比较方便。</li>
<li>设置base_link。修改途中与base_link相连link个数时会在下方创建Empty_link，由于我已经修改过了，所以名称不一样。</li>
</ol>
<p><img src="/images/Solidworks%E6%A8%A1%E5%9E%8B%E5%AF%BC%E5%87%BAurdf/02.png" alt="02"></p>
<ol start="3">
<li>设置每个单独的link。在上图框中五个link中选中就会进入每个单独link的设置过程。这里每个link设置就一样了，以一个轮子为例。</li>
</ol>
<p>这里的joint类型说明一下：</p>
<ul>
<li>revolute：旋转关节，可设定转动范围</li>
<li>continuous：旋转关节，无位置限制</li>
<li>prismatic：滑动关节，有位置限制</li>
<li>fixed：虚拟关节，不可运动</li>
<li>floating：六自由度关节</li>
<li>planar：平面关节</li>
</ul>
<p><img src="/images/Solidworks%E6%A8%A1%E5%9E%8B%E5%AF%BC%E5%87%BAurdf/03.png" alt="03"></p>
<ol start="4">
<li>根据以上步骤设置完所有关节后，开始导出文件。选中下图框中Preview and Export，会自动计算数据，并生成预览。检查没问题后，按照引导导出文件就好。</li>
</ol>
<ul>
<li><p><strong>命名时有个问题需要注意一下</strong>：这里的命名内容包括<strong>小写字母、下划线、数字</strong>，否则在ROS中需要改相当一部分内容的名字，这里最好一步到位。</p>
</li>
<li><p>其实这里的建模，最好不要把一些螺栓、螺钉、固定板等比较杂的零件放进去，计算速度会慢，找到主要的主体、传感器、轮子等就好。</p>
</li>
</ul>
<p><img src="/images/Solidworks%E6%A8%A1%E5%9E%8B%E5%AF%BC%E5%87%BAurdf/04.png" alt="04"></p>
<h1 id="四、-ros中显示"><a href="#四、-ros中显示" class="headerlink" title="四、 ros中显示"></a>四、 ros中显示</h1><ol>
<li>创建工作空间</li>
<li>将上一步solidworks插件生成的功能包复制到工作空间的src目录下。</li>
<li>修改功能包的以下几个地方：<ul>
<li>package.xml中的邮箱，可以设置个自己的</li>
<li>display.launch中添加一行代码<code>&lt;node pkg="joint_state_publisher" type="joint_state_publisher" name="joint_state_publisher"&gt;</code>。<del>因为自动生成的launch文件使用joint_state_publisher_gui，在rviz中出现节点间没有坐标变换的情况</del>，如下图<br><img src="/images/Solidworks%E6%A8%A1%E5%9E%8B%E5%AF%BC%E5%87%BAurdf/05.png" alt="05"></li>
</ul>
</li>
</ol>
<p><strong>这里修正一下：</strong><br>joint_state_publisher_gui不是不发布坐标变换信息，而是又可能没有安装这个包<br><code>sudo apt-get install ros-melodic-joint-state-publisher-gui</code></p>
<ol start="4">
<li>最终使用roslaunch在rviz模型中显示，如下图。<br> <img src="/images/Solidworks%E6%A8%A1%E5%9E%8B%E5%AF%BC%E5%87%BAurdf/06.png" alt="06"></li>
</ol>

</div>
  
                </div>
            </div>

        </div>
        

        <!-- 引入 jquery -->
        
<script src="/lib/jQuery.min.js"></script>


        <!-- 引入代码高亮的 js -->
        
<script src="/lib/highlight/highlight.pack.js"></script>


        <!-- 引入 pjax -->
        
<script src="/lib/jquery.pjax.js"></script>


        <!-- 引入 js 文件 -->
        
<script src="/js/main.js"></script>




    </body>
    <footer class="footer">
        <span style="font-size: 20px; font-family: '楷体';color: gray;">青岛科技大学 机器人研发中心 机械实验182 张桂新</span>
    </footer>

</html>